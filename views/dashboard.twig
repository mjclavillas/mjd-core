{% extends "layout.twig" %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <header class="mb-10">
        <h2 class="text-3xl font-black tracking-tight text-white uppercase italic">System_Overview</h2>
        <p class="mono text-xs text-white/40 uppercase tracking-widest mt-2">Active Session: {{ session.username|default('ROOT_USER') }}</p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div class="bg-white/[0.02] border border-white/5 rounded-2xl p-6 backdrop-blur-sm group hover:border-indigo-500/50 transition-all">
            <div class="flex justify-between items-start mb-4">
                <span class="mono text-[10px] text-white/30 uppercase tracking-widest">Total_Users</span>
                <div class="w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>
            </div>
            <div class="text-4xl font-black text-white mb-1">{{ stats.user_count|default(0) }}</div>
            <div class="mono text-[10px] text-emerald-400">+12.5% vs Prev_Month</div>
        </div>

        <div class="bg-white/[0.02] border border-white/5 rounded-2xl p-6 backdrop-blur-sm group hover:border-amber-500/50 transition-all">
            <div class="flex justify-between items-start mb-4">
                <span class="mono text-[10px] text-white/30 uppercase tracking-widest">Server_Latency</span>
                <span class="mono text-[10px] text-amber-400">OPTIMAL</span>
            </div>
            <div class="text-4xl font-black text-white mb-1">24<span class="text-lg text-white/30 ml-1">ms</span></div>
            <div class="mono text-[10px] text-white/20">Node: LocalForge_S1</div>
        </div>

        <div class="bg-white/[0.02] border border-white/5 rounded-2xl p-6 backdrop-blur-sm group hover:border-emerald-500/50 transition-all">
            <div class="flex justify-between items-start mb-4">
                <span class="mono text-[10px] text-white/30 uppercase tracking-widest">Storage_Usage</span>
                <span class="mono text-[10px] text-white/30 italic">82% Full</span>
            </div>
            <div class="w-full bg-white/5 h-1 rounded-full mt-4 mb-2 overflow-hidden">
                <div class="bg-emerald-500 h-full w-[82%] shadow-[0_0_10px_rgba(16,185,129,0.3)]"></div>
            </div>
            <div class="mono text-[10px] text-white/20 text-right">32.4 GB / 40 GB</div>
        </div>
    </div>

    <div class="bg-black/20 border border-white/5 rounded-2xl overflow-hidden">
        <div class="px-6 py-4 border-b border-white/5 flex justify-between items-center">
            <h3 class="mono text-[11px] font-bold uppercase tracking-widest">Recent_Activity_Logs</h3>
            <button class="mono text-[10px] text-indigo-400 hover:text-white uppercase">Export_CSV</button>
        </div>
        <table class="w-full text-left">
            <thead class="bg-white/[0.02] mono text-[10px] text-white/30 uppercase tracking-tighter">
                <tr>
                    <th class="px-6 py-3 font-medium">Timestamp</th>
                    <th class="px-6 py-3 font-medium">Event_Type</th>
                    <th class="px-6 py-3 font-medium">Status</th>
                    <th class="px-6 py-3 font-medium text-right">Action</th>
                </tr>
            </thead>
            <tbody class="mono text-xs divide-y divide-white/5">
                {% for log in activity|default([]) %}
                <tr class="hover:bg-white/[0.01] transition-colors">
                    <td class="px-6 py-4 text-white/40">{{ log.date }}</td>
                    <td class="px-6 py-4 font-bold">{{ log.type }}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-0.5 rounded-full {% if log.status == 'SUCCESS' %}text-emerald-400 bg-emerald-400/10{% else %}text-red-400 bg-red-400/10{% endif %}">
                            {{ log.status }}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <button class="text-white/20 hover:text-white transition">Details_></button>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="px-6 py-10 text-center text-white/20 italic">No active logs detected in current buffer.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="px-6 py-4 border-t border-white/5 flex items-center justify-between bg-white/[0.01]">
            <div class="mono text-[10px] text-white/20 uppercase tracking-widest">
                Showing Page {{ pagination.current }} of {{ pagination.total }}
            </div>

            <div class="flex gap-2">
                {% if pagination.has_prev %}
                    <a href="?page={{ pagination.current - 1 }}"
                    class="px-3 py-1 bg-white/5 border border-white/10 rounded-md mono text-[10px] text-white/60 hover:text-white hover:bg-white/10 transition">
                        < PREV_CHUNK
                    </a>
                {% else %}
                    <span class="px-3 py-1 bg-white/[0.02] border border-white/5 rounded-md mono text-[10px] text-white/10 cursor-not-allowed">
                        < PREV_CHUNK
                    </span>
                {% endif %}

                {% if pagination.has_next %}
                    <a href="?page={{ pagination.current + 1 }}"
                    class="px-3 py-1 bg-white/5 border border-white/10 rounded-md mono text-[10px] text-white/60 hover:text-white hover:bg-white/10 transition">
                        NEXT_CHUNK >
                    </a>
                {% else %}
                    <span class="px-3 py-1 bg-white/[0.02] border border-white/5 rounded-md mono text-[10px] text-white/10 cursor-not-allowed">
                        NEXT_CHUNK >
                    </span>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}